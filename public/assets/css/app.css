/* =========================================================
   TOKENS DE DISEÑO (paleta base + tokens semánticos)
   ========================================================= */
:root{
  /* Paleta base */
  --brand:       #17a34a;
  --brand-600:   #0f7a33;
  --brand-700:   #0c6229;
  --mint:        #9AE6B4;
  --emerald:     #10B981;
  --teal:        #0EA5A4;
  --sage:        #e7f2ec;
  --sand:        #F8E7C7;
  --ink:         #1f2937;

  /* Semánticos */
  --bg:          #f7faf9;
  --surface:     #ffffff;
  --surface-alt: #f6faf7;
  --text:        var(--ink);
  --muted:       #64748b;
  --border:      rgba(0,0,0,.08);
  --border-strong: rgba(0,0,0,.12);
  --ring:        rgba(16,185,129,.35);

  /* Radios / sombras / tiempos */
  --r-sm: 10px;
  --r-md: 12px;
  --r-lg: 18px;
  --shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --shadow-2: 0 8px 30px rgba(16,185,129,.08);
  --shadow-inset-brand: inset 3px 0 0 var(--brand);

  --timing-fast: .15s;
  --timing-med:  .25s;

  color-scheme: light;
}

/* =========================================================
   BASE / FONDO
   ========================================================= */
body{
  color: var(--text);
  background-color: #f9fbfa;
  background-image:
    url('logo.png'),
    radial-gradient(circle at 10% 90%, rgba(22, 99, 79, 0.05) 0%, transparent 60%),
    radial-gradient(circle at 90% 10%, rgba(22, 99, 79, 0.05) 0%, transparent 60%);
  background-repeat: no-repeat;
  background-position: bottom right, 10% 90%, 90% 10%;
  background-size: 120px, 250px, 250px;
  background-attachment: fixed;
  filter: opacity(0.97);
}

/* Transiciones suaves por defecto (respetando reduce-motion) */
*,
*::before,
*::after{
  transition:
    border-color var(--timing-fast) ease,
    box-shadow var(--timing-fast) ease,
    background-color var(--timing-fast) ease,
    color var(--timing-fast) ease,
    filter var(--timing-fast) ease;
}
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{ transition: none !important; scroll-behavior: auto !important; }
}

/* =========================================================
   CARD / HEADER
   ========================================================= */
.card{
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--r-lg);
  box-shadow: var(--shadow-2);
}
.card-header{
  border: none;
  padding-block: .9rem;
  color: var(--text);
  background: linear-gradient(180deg, #f2fbf5 0%, #edf9f3 60%, #e9f6ff 100%);
  position: relative;
  border-top-left-radius: var(--r-lg);
  border-top-right-radius: var(--r-lg);
}
.card-header::after{
  content:"";
  position:absolute; inset:auto 0 0 0; height:3px;
  background: linear-gradient(90deg, var(--brand), var(--teal));
  border-bottom-left-radius: var(--r-lg);
  border-bottom-right-radius: var(--r-lg);
  opacity:.75;
}
.card-header.bg-success-subtle {
  background: linear-gradient(180deg, #d8f5e3 0%, #b7efcb 100%) !important;
  color: #0a4d28;
  font-weight: 700;
  text-shadow: 0 1px 0 rgba(255,255,255,0.5);
}

/* Subtítulos con franja moderna (sección separadora) */
.border-top.border-bottom {
  background: linear-gradient(180deg, #ffffff 0%, #e8f5f1 40%, #c2ede0 75%, #aaf5a7 100%);
  border-color: var(--border) !important;
}
.border-top.border-bottom h6 { font-weight: 700; color: #333; }

/* =========================================================
   CONTROLES / FOCUS
   ========================================================= */
.form-control,
.form-select{
  border-radius: var(--r-md);
  border: 1px solid var(--border-strong);
  background: var(--surface);
  color: var(--text);
  box-shadow: var(--shadow-1);
}
.form-control:focus-visible,
.form-select:focus-visible{
  outline: 0;
  border-color: var(--emerald);
  box-shadow: 0 0 0 .25rem var(--ring);
}
/* Files un poco más altos */
input[type="file"].form-control{ padding-top:.55rem; padding-bottom:.55rem; }
/* Placeholder algo más tenue */
::placeholder{ color: color-mix(in oklab, var(--muted) 70%, #fff 30%); }

/* =========================================================
   ÁREA DE SCROLL (COMPONENTE GENÉRICO)
   ========================================================= */
.scroll-area{
  border-radius: 14px;
  background: var(--surface);
  overflow: auto;
  /* Firefox */
  scrollbar-color: rgba(0,0,0,.15) transparent;
  scrollbar-width: thin;
}
/* WebKit */
.scroll-area::-webkit-scrollbar{ width:10px; height:10px; }
.scroll-area::-webkit-scrollbar-thumb{ background: rgba(0,0,0,.15); border-radius: 8px; }

/* Ítems dentro del scroll (base) */
.scroll-area .list-group-item{
  border:0; border-bottom:1px dashed rgba(0,0,0,.07);
  padding:.9rem 1rem .9rem .95rem;
  transition: background var(--timing-fast) ease, transform .06s ease, box-shadow var(--timing-fast) ease;
  position: relative;
  background: transparent;
}
.scroll-area .list-group-item:hover{ background:#fbfffd; }

/* Estado seleccionado (con :has y fallback por data-attr) */
.scroll-area .list-group-item:has(input:checked),
.scroll-area .list-group-item[data-checked="true"]{
  background: linear-gradient(90deg, rgba(16,185,129,.09), transparent 45%);
  box-shadow: var(--shadow-inset-brand);
}

/* Checkbox genérico */
.form-check-input{
  width:1.05rem; height:1.05rem; margin-top:.2rem; cursor:pointer;
  accent-color: var(--brand);
  border: 1px solid var(--border-strong);
}
.form-check-input:checked{
  background-color: var(--brand);
  border-color: var(--brand);
}
.form-check-input:focus-visible{
  outline: 0;
  box-shadow: 0 0 0 .2rem var(--ring);
}
.form-check-input:disabled{ opacity:.55; cursor:not-allowed; }

/* =========================================================
   BOTONERA (pegada inferior)
   ========================================================= */
.sticky-actions{
  background: linear-gradient(0deg, rgba(255,255,255,.97), rgba(255,255,255,.92));
  border-top:1px solid var(--border) !important;
  box-shadow: 0 -10px 24px rgba(16,185,129,.08);
}
.btn-success{
  background: linear-gradient(180deg, var(--brand) 0%, var(--brand-600) 100%);
  border:1px solid var(--brand-700);
  box-shadow: 0 6px 14px rgba(16,185,129,.25), inset 0 1px 0 rgba(255,255,255,.2);
  color:#fff;
}
.btn-success:hover{ filter: brightness(.97) saturate(1.05); }
.btn-success:active{ transform: translateY(1px); filter: brightness(.95); }
.btn-success:disabled{ opacity:.6; box-shadow:none; }
.btn-success:focus-visible{
  outline:0; box-shadow: 0 0 0 .25rem var(--ring), 0 6px 14px rgba(16,185,129,.25) inset;
}

/* =========================================================
   BADGES (GENÉRICAS)
   ========================================================= */
.badge{ border-radius:999px; font-weight:700; padding:.36rem .62rem; letter-spacing:.2px; }
.badge-soft-success{ background:#e9fdf4; color:#047857; border:1px solid rgba(16,185,129,.30); }
.badge-soft-warning{ background:#fff6df; color:#925b0e; border:1px solid rgba(245,158,11,.32); }
.badge-soft-danger { background:#fee8e8; color:#9b1c1c; border:1px solid rgba(239,68,68,.32); }
.badge-soft-secondary{ background:#eef2f5; color:#334155; border:1px solid rgba(100,116,139,.28); }

/* =========================================================
   NAVBAR (cristalina)
   ========================================================= */
.navbar{
  position: sticky; top:0; z-index:1020;
  -webkit-backdrop-filter: saturate(160%) blur(8px);
  backdrop-filter: saturate(160%) blur(8px);
  background: rgba(255,255,255,.85) !important;
  border-bottom:1px solid var(--border) !important;
}
.navbar .nav-link:hover,
.navbar .nav-link:focus-visible{ color: var(--brand) !important; outline: 0; }

/* =========================================================
   ACCESIBILIDAD / PRINT
   ========================================================= */
@media (forced-colors: active){
  .btn-success{ border: 1px solid CanvasText; }
  .form-control:focus-visible,
  .form-select:focus-visible{ outline: 2px solid Highlight; box-shadow: none; }
}
@media print{
  .navbar{ position: static; backdrop-filter: none; -webkit-backdrop-filter: none; }
  .card, .card-header, .sticky-actions{ box-shadow: none !important; background: #fff !important; }
}

/* Etiquetas y helpers */
.form-label { font-weight: 700 !important; color: var(--text); }

/* Estado loading genérico (inline SVG) */
.loading{
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="gray" class="bi bi-arrow-repeat" viewBox="0 0 16 16"><path d="M2 2v5h.5a.5.5 0 0 0 .5-.5V3.707l2.147 2.147a5 5 0 1 0 1.154-1.638L3.5 2.5A.5.5 0 0 0 3 2H2z"/><path d="M14 14v-5h-.5a.5.5 0 0 0-.5.5v3.293l-2.147-2.147a5 5 0 1 0-1.154 1.638L12.5 13.5a.5.5 0 0 0 .5.5h1z"/></svg>');
  background-repeat: no-repeat;
  background-position: right 0.75rem center;
  background-size: 1rem;
}

/* Spinner helper */
.spin{ animation: spin 0.8s linear infinite; }
@keyframes spin{ from{transform:rotate(0deg);} to{transform:rotate(360deg);} }
